
<!DOCTYPE html>
<html lang="zh-cn">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Tron Blog!">
    <title>归档: 2017 - Tron Blog!</title>
    <meta name="author" content="Archie Shi">
    
    
    
    <meta name="description" content="Archie&apos;s Blog">
<meta property="og:type" content="blog">
<meta property="og:title" content="Tron Blog!">
<meta property="og:url" content="https://shianqi.github.io/archives/2017/page/7/index.html">
<meta property="og:site_name" content="Tron Blog!">
<meta property="og:description" content="Archie&apos;s Blog">
<meta property="og:locale" content="zh-cn">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Tron Blog!">
<meta name="twitter:description" content="Archie&apos;s Blog">
    
    
        
    
    
        <meta property="og:image" content="http://cdn.shianqi.com/20171110003439_iub77X_cat_sm.png"/>
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/style-ywijujnc71acsrrxuejmomiuckrww8ghivq5n28telwc6cwsucrwjgq26ffz.min.css">
    <!--STYLES END-->
    
    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


<header id="header" data-behavior="1">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a class="header-title-link" href="/ ">Tron Blog!</a>
    </div>
    
        
            <a  class="header-right-icon open-algolia-search"
                href="#about">
        
        
            <i class="fa fa-lg fa-search"></i>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="1">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a href="/#about">
                    <img class="sidebar-profile-picture" src="http://cdn.shianqi.com/20171110003439_iub77X_cat_sm.png" alt="作者的图片"/>
                </a>
                <h4 class="sidebar-profile-name">Archie Shi</h4>
                
                    <h5 class="sidebar-profile-bio"><p>Nothing to say</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/ "
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-home"></i>
                        <span class="sidebar-button-desc">首页</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-tags"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
                        <span class="sidebar-button-desc">标签</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-archives"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
                        <span class="sidebar-button-desc">归档</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link open-algolia-search"
                             href="#search"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-search"></i>
                        <span class="sidebar-button-desc">搜索</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="#about"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-question"></i>
                        <span class="sidebar-button-desc">关于</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://github.com/shianqi" target="_blank" rel="noopener">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-github"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="tencent://message/?uin=1210219084&Site=有事Q我&Menu=yes" target="_blank" rel="noopener">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-qq"></i>
                        <span class="sidebar-button-desc">QQ</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="mailto:shianqi@imudges.com" target="_blank" rel="noopener">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-envelope-o"></i>
                        <span class="sidebar-button-desc">邮箱</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="1"
                 class="
                        hasCoverMetaIn
                        ">
                
    <section class="postShorten-group main-content-wrap">
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title" itemprop="headline">
                    
                        <a class="link-unstyled" href="/2017/06/18/FetchAPI/FetchAPI/">
                            Fetch API
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time itemprop="datePublished" datetime="2017-06-18T19:44:03+08:00">
	
		    6月 18, 2017
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content" itemprop="articleBody">
                    <h2 id="概况"><a href="#概况" class="headerlink" title="概况"></a>概况</h2><p><code>JavaScript</code> 通过 <code>XMLHttpRequest(XHR)</code> 来执行异步请求，这个方式已经存在了很长一段时间。但它不是最佳API。它在设计上不符合职责分离原则，将输入、输出和用事件来跟踪的状态混杂在一个对象里。而且，基于事件的模型与最近 <code>JavaScript</code> 流行的 <code>Promise</code> 以及基于生成器的异步编程模型不太搭。新的 <code>Fetch API</code> 打算修正上面提到的那些缺陷。</p>
<p>而与jQuery相比， fetch 方法与 jQuery.ajax() 的主要区别在于：</p>
<ul>
<li><code>fetch()</code> 方法返回的 <code>Promise</code> 对象并不会在HTTP状态码为404或者500的时候自动抛出异常，而需要用户进行手动处理</li>
<li>默认情况下，<code>fetch</code> 并不会发送任何的本地的 <code>cookie</code> 到服务端，注意，如果服务端依靠 <code>Session</code> 进行用户控制的话要默认开启 <code>Cookie</code></li>
</ul>
<h2 id="Installation-amp-Polyfill"><a href="#Installation-amp-Polyfill" class="headerlink" title="Installation &amp; Polyfill"></a>Installation &amp; Polyfill</h2><p><code>window.fetch</code> 是基于 <code>XMLHttpRequest</code> 的浏览器的统一的封装，针对老的浏览器可以使用 <code>Github</code> 的这个<a href="https://github.com/github/fetch" target="_blank" rel="external">polypill</a>。 <code>fetch</code> 基于 <code>ES6</code> 的 <code>Promise</code> ，在旧的浏览器中首先需要引入 <code>Promise</code>的 <code>polypill</code> ，可以用 <a href="https://github.com/stefanpenner/es6-promise" target="_blank" rel="external">es6-promise</a>:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install es6-promise</span><br></pre></td></tr></table></figure></p>
<p>使用 <a href="https://github.com/matthew-andrews/isomorphic-fetch" target="_blank" rel="external">isomorphic-fetch</a>：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save isomorphic-fetch es6-promise</span><br></pre></td></tr></table></figure></p>
<p>使用的时候也非常方便：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">require(&apos;es6-promise&apos;).polyfill();</span><br><span class="line">require(&apos;isomorphic-fetch&apos;);</span><br><span class="line">fetch(&apos;//offline-news-api.herokuapp.com/stories&apos;)</span><br><span class="line">    .then(function(response) &#123;</span><br><span class="line">        if (response.status &gt;= 400) &#123;</span><br><span class="line">            throw new Error(&quot;Bad response from server&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        return response.json();</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(function(stories) &#123;</span><br><span class="line">        console.log(stories);</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>
<h2 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h2><h3 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">fetch(&apos;/users.html&apos;)</span><br><span class="line">  .then(function(response) &#123;</span><br><span class="line">    return response.text()</span><br><span class="line">  &#125;).then(function(body) &#123;</span><br><span class="line">    document.body.innerHTML = body</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>
<h3 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">fetch(&apos;/users.json&apos;)</span><br><span class="line">  .then(function(response) &#123;</span><br><span class="line">    return response.json()</span><br><span class="line">  &#125;).then(function(json) &#123;</span><br><span class="line">    console.log(&apos;parsed json&apos;, json)</span><br><span class="line">  &#125;).catch(function(ex) &#123;</span><br><span class="line">    console.log(&apos;parsing failed&apos;, ex)</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>
<h3 id="Response-metadata"><a href="#Response-metadata" class="headerlink" title="Response metadata"></a>Response metadata</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">fetch(&apos;/users.json&apos;).then(function(response) &#123;</span><br><span class="line">  console.log(response.headers.get(&apos;Content-Type&apos;))</span><br><span class="line">  console.log(response.headers.get(&apos;Date&apos;))</span><br><span class="line">  console.log(response.status)</span><br><span class="line">  console.log(response.statusText)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="Post-form"><a href="#Post-form" class="headerlink" title="Post form"></a>Post form</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var form = document.querySelector(&apos;form&apos;)</span><br><span class="line"></span><br><span class="line">fetch(&apos;/users&apos;, &#123;</span><br><span class="line">  method: &apos;POST&apos;,</span><br><span class="line">  body: new FormData(form)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="Post-JSON"><a href="#Post-JSON" class="headerlink" title="Post JSON"></a>Post JSON</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">fetch(&apos;/users&apos;, &#123;</span><br><span class="line">  method: &apos;POST&apos;,</span><br><span class="line">  headers: &#123;</span><br><span class="line">    &apos;Content-Type&apos;: &apos;application/json&apos;</span><br><span class="line">  &#125;,</span><br><span class="line">  body: JSON.stringify(&#123;</span><br><span class="line">    name: &apos;Hubot&apos;,</span><br><span class="line">    login: &apos;hubot&apos;,</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="File-upload"><a href="#File-upload" class="headerlink" title="File upload"></a>File upload</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">var input = document.querySelector(&apos;input[type=&quot;file&quot;]&apos;)</span><br><span class="line"></span><br><span class="line">var data = new FormData()</span><br><span class="line">data.append(&apos;file&apos;, input.files[0])</span><br><span class="line">data.append(&apos;user&apos;, &apos;hubot&apos;)</span><br><span class="line"></span><br><span class="line">fetch(&apos;/avatars&apos;, &#123;</span><br><span class="line">  method: &apos;POST&apos;,</span><br><span class="line">  body: data</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="Request-请求构造"><a href="#Request-请求构造" class="headerlink" title="Request:请求构造"></a>Request:请求构造</h2><p>Request对象代表了一次fetch请求中的请求体部分，你可以自定义Request对象:</p>
<ul>
<li><code>method</code> - 使用的HTTP动词，<code>GET</code>, <code>POST</code>, <code>PUT</code>, <code>DELETE</code>, <code>HEAD</code></li>
<li><code>url</code> - 请求地址，<code>URL of the request</code></li>
<li><code>headers</code> - 关联的Header对象</li>
<li><code>referrer</code> - <code>referrer</code></li>
<li><code>mode</code> - 请求的模式，主要用于跨域设置，<code>cors</code>, <code>no-cors</code>, <code>same-origin</code></li>
<li><code>credentials</code> - 是否发送Cookie <code>omit</code>, <code>same-origin</code></li>
<li><code>redirect</code> - 收到重定向请求之后的操作，<code>follow</code>, <code>error</code>, <code>manual</code></li>
<li><code>integrity</code> - 完整性校验</li>
<li><code>cache</code> - 缓存模式(<code>default</code>, <code>reload</code>, <code>no-cache</code>)<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">var request = new Request(&apos;/users.json&apos;, &#123;</span><br><span class="line">    method: &apos;POST&apos;,</span><br><span class="line">    mode: &apos;cors&apos;,</span><br><span class="line">    redirect: &apos;follow&apos;,</span><br><span class="line">    headers: new Headers(&#123;</span><br><span class="line">        &apos;Content-Type&apos;: &apos;text/plain&apos;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">//use it</span><br><span class="line">fetch(request).then(function() &#123; /* handle response */ &#125;);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">fetch(&apos;/users.json&apos;, &#123;</span><br><span class="line">    method: &apos;POST&apos;,</span><br><span class="line">    mode: &apos;cors&apos;,</span><br><span class="line">    redirect: &apos;follow&apos;,</span><br><span class="line">    headers: new Headers(&#123;</span><br><span class="line">        &apos;Content-Type&apos;: &apos;text/plain&apos;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;).then(function() &#123; /* handle response */ &#125;);</span><br></pre></td></tr></table></figure>
<h3 id="Cookies"><a href="#Cookies" class="headerlink" title="Cookies"></a>Cookies</h3><p>如果需要设置fetch自动地发送本地的Cookie，需要将credentials设置为same-origin:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fetch(&apos;/users&apos;, &#123;</span><br><span class="line">  credentials: &apos;same-origin&apos;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>该选项会以类似于XMLHttpRequest的方式来处理Cookie，否则，可能因为没有发送Cookie而导致基于Session的认证出错。可以将credentials的值设置为include来在CORS情况下发送请求。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fetch(&apos;https://example.com:1234/users&apos;, &#123;</span><br><span class="line">  credentials: &apos;include&apos;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<h3 id="Headers-自定义请求头"><a href="#Headers-自定义请求头" class="headerlink" title="Headers:自定义请求头"></a>Headers:自定义请求头</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">// Create an empty Headers instance</span><br><span class="line">var headers = new Headers();</span><br><span class="line"></span><br><span class="line">// Add a few headers</span><br><span class="line">headers.append(&apos;Content-Type&apos;, &apos;text/plain&apos;);</span><br><span class="line">headers.append(&apos;X-My-Custom-Header&apos;, &apos;CustomValue&apos;);</span><br><span class="line"></span><br><span class="line">// Check, get, and set header values</span><br><span class="line">headers.has(&apos;Content-Type&apos;); // true</span><br><span class="line">headers.get(&apos;Content-Type&apos;); // &quot;text/plain&quot;</span><br><span class="line">headers.set(&apos;Content-Type&apos;, &apos;application/json&apos;);</span><br><span class="line"></span><br><span class="line">// Delete a header</span><br><span class="line">headers.delete(&apos;X-My-Custom-Header&apos;);</span><br><span class="line"></span><br><span class="line">// Add initial values</span><br><span class="line">var headers = new Headers(&#123;</span><br><span class="line">    &apos;Content-Type&apos;: &apos;text/plain&apos;,</span><br><span class="line">    &apos;X-My-Custom-Header&apos;: &apos;CustomValue&apos;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="使用webpack前后端跨域发送cookie的问题"><a href="#使用webpack前后端跨域发送cookie的问题" class="headerlink" title="使用webpack前后端跨域发送cookie的问题"></a>使用webpack前后端跨域发送cookie的问题</h3><p>最简单的方法是服务端将响就头设置成 <code>Access-Control-Allow-Origin：域名</code>，如果客户端发送请求时，不需要携带 <code>cookie</code> 等信息，可以设置成 <code>Access-Control-Allow-Origin：*</code> ，表示任何域都可以向服务端发送请求，客户端不需要任何配置，就可以进行跨域调试了。</p>
<p>但一般网站，都需要向后端发送 <code>cookie</code>来进行身份验证，此时，服务器还需向响应头设置 <code>Access-Control-Allow-Credentials:true</code>，表示跨域时，允许cookie添加到请求中。设置 <code>Access-Control-Allow-Credentials:true</code> 后，要将 <code>Access-Control-Allow-Origin</code> 指定到具体的域，否则cookie不会带到客户端，例如设置成<code>Access-Control-Allow-Origin：http://192.168.0.1:8088</code>,<a href="http://192.168.0.1:8088" target="_blank" rel="external">http://192.168.0.1:8088</a> 是前端服务器的域名，这就要求用webpack的时候，要指定具体的域来启动，不要直接用localhost。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">devServer: &#123;</span><br><span class="line">    host: &apos;192.168.0.1:8088&apos;,</span><br><span class="line">&#125;,</span><br><span class="line">...</span><br></pre></td></tr></table></figure></p>
<p>要向后端发送cookie，前端也需要有相应的配置。需要将<code>credentials</code>设置成<code>include</code>，表示允许跨越传递<code>cookie</code>，不要将<code>credentials</code>设置成<code>same-origin</code>,如果设置成<code>same-origin</code>，只会在同源的时候发送cookie。另外还要将 <code>withCredentials</code> 设为<code>true</code>。</p>
<h2 id="Response-响应处理"><a href="#Response-响应处理" class="headerlink" title="Response:响应处理"></a>Response:响应处理</h2><p>在fetch的then函数中提供了一个Response对象，即代表着对于服务端返回值的封装，你也可以在Mock的时候自定义Response对象，譬如在你需要使用Service Workers的情况下，在Response中，你可以作如下配置:</p>
<ul>
<li><code>type</code> - basic, cors</li>
<li><code>url</code></li>
<li><code>useFinalURL</code> - 是否为最终地址</li>
<li><code>status</code> - 状态码 (ex: 200, 404, etc.)</li>
<li><code>ok</code> - 是否成功响应 (status in the range 200-299)</li>
<li><code>statusText</code> - status code (ex: OK)</li>
<li><code>headers</code> - 响应头</li>
</ul>
<p>The <code>Response</code> also provides the following methods:</p>
<ul>
<li><code>clone()</code>- Creates a clone of a Response object.</li>
<li><code>error()</code> - Returns a new Response object associated with a network error.</li>
<li><code>redirect()</code> - Creates a new response with a different URL.</li>
<li><code>arrayBuffer()</code> - Returns a promise that resolves with an ArrayBuffer.</li>
<li><code>blob()</code> - Returns a promise that resolves with a Blob.</li>
<li><code>formData()</code> - Returns a promise that resolves with a FormData object.</li>
<li><code>json()</code> - Returns a promise that resolves with a JSON object.</li>
<li><code>text()</code> - Returns a promise that resolves with a USVString (text).</li>
</ul>
<h3 id="处理HTTP错误状态"><a href="#处理HTTP错误状态" class="headerlink" title="处理HTTP错误状态"></a>处理HTTP错误状态</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">function checkStatus(response) &#123;</span><br><span class="line">  if (response.status &gt;= 200 &amp;&amp; response.status &lt; 300) &#123;</span><br><span class="line">    return response</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    var error = new Error(response.statusText)</span><br><span class="line">    error.response = response</span><br><span class="line">    throw error</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function parseJSON(response) &#123;</span><br><span class="line">  return response.json()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fetch(&apos;/users&apos;)</span><br><span class="line">  .then(checkStatus)</span><br><span class="line">  .then(parseJSON)</span><br><span class="line">  .then(function(data) &#123;</span><br><span class="line">    console.log(&apos;request succeeded with JSON response&apos;, data)</span><br><span class="line">  &#125;).catch(function(error) &#123;</span><br><span class="line">    console.log(&apos;request failed&apos;, error)</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>
<h3 id="处理JSON响应"><a href="#处理JSON响应" class="headerlink" title="处理JSON响应"></a>处理JSON响应</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">fetch(&apos;https://davidwalsh.name/demo/arsenal.json&apos;).then(function(response) &#123;</span><br><span class="line"></span><br><span class="line">// Convert to JSON</span><br><span class="line"></span><br><span class="line">return response.json();</span><br><span class="line"></span><br><span class="line">&#125;).then(function(j) &#123;</span><br><span class="line"></span><br><span class="line">// Yay, `j` is a JavaScript object</span><br><span class="line"></span><br><span class="line">console.log(j);</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="处理文本响应"><a href="#处理文本响应" class="headerlink" title="处理文本响应"></a>处理文本响应</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">fetch(&apos;/next/page&apos;)</span><br><span class="line"></span><br><span class="line">  .then(function(response) &#123;</span><br><span class="line"></span><br><span class="line">    return response.text();</span><br><span class="line"></span><br><span class="line">  &#125;).then(function(text) &#123;</span><br><span class="line"></span><br><span class="line">  // &lt;!DOCTYPE ....</span><br><span class="line"></span><br><span class="line">  console.log(text);</span><br><span class="line"></span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>
<h3 id="Blob-Responses"><a href="#Blob-Responses" class="headerlink" title="Blob Responses"></a>Blob Responses</h3><p>如果你希望通过fetch方法来载入一些类似于图片等资源：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">fetch(&apos;flowers.jpg&apos;)</span><br><span class="line"></span><br><span class="line">    .then(function(response) &#123;</span><br><span class="line"></span><br><span class="line">       return response.blob();</span><br><span class="line"></span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    .then(function(imageBlob) &#123;</span><br><span class="line"></span><br><span class="line">       document.querySelector(&apos;img&apos;).src = URL.createObjectURL(imageBlob);</span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line">blob()方法会接入一个响应流并且一直读入到结束。</span><br></pre></td></tr></table></figure>

                    
                        
                    
                    
                        <p>
                            <a href="/2017/06/18/FetchAPI/FetchAPI/#post-footer" class="postShorten-excerpt_link link">
                                评论和共享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title" itemprop="headline">
                    
                        <a class="link-unstyled" href="/2017/06/11/React/React生命周期/">
                            React 生命周期
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time itemprop="datePublished" datetime="2017-06-11T15:51:56+08:00">
	
		    6月 11, 2017
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content" itemprop="articleBody">
                    <h3 id="初始化阶段："><a href="#初始化阶段：" class="headerlink" title="初始化阶段："></a>初始化阶段：</h3><table>
<thead>
<tr>
<th>函数名</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>constructor(props)</code></td>
<td>构造函数</td>
</tr>
<tr>
<td><code>componentWillMount</code></td>
<td>render之前最后一次修改状态的机会</td>
</tr>
<tr>
<td><code>render</code></td>
<td>只能访问this.props和this.state,只有一个顶层组件，不允许修改状态和DOM输出</td>
</tr>
<tr>
<td><code>componentDidMount</code></td>
<td>成功render并渲染完成真实DOM之后触发，可以修改DOM</td>
</tr>
</tbody>
</table>
<h3 id="运行中阶段："><a href="#运行中阶段：" class="headerlink" title="运行中阶段："></a>运行中阶段：</h3><table>
<thead>
<tr>
<th>函数名</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>componentWillReceiveProps</code></td>
<td>父组件修改属性触发，可以修改属性、修改状态</td>
</tr>
<tr>
<td><code>shouldComponentUpdate</code></td>
<td>组件是否要更新，返回false会阻止render调用</td>
</tr>
<tr>
<td><code>componentWillUnpdate</code></td>
<td>不能修改状态和属性</td>
</tr>
<tr>
<td><code>render</code></td>
<td>只能访问this.props和this.state,不允许修改状态和DOM输出</td>
</tr>
<tr>
<td><code>componentDidUpdate</code></td>
<td>可以修改DOM</td>
</tr>
</tbody>
</table>
<h3 id="销毁阶段："><a href="#销毁阶段：" class="headerlink" title="销毁阶段："></a>销毁阶段：</h3><table>
<thead>
<tr>
<th>函数名</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>componentWillUnmount</code></td>
<td>在删除组件之前进行清理操作，比如计时器和事件处理器</td>
</tr>
</tbody>
</table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; Component &#125; from &apos;react&apos;</span><br><span class="line"></span><br><span class="line">class GD extends Component&#123;</span><br><span class="line"></span><br><span class="line">    constructor(props) &#123;</span><br><span class="line">        super(props)</span><br><span class="line">        console.log(&apos;constructor&apos;)</span><br><span class="line">        this.state = &#123;</span><br><span class="line">            shrinkState: true</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    componentWillMount() &#123;</span><br><span class="line">        console.log(&apos;componentWillMount&apos;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    render() &#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &lt;h3&gt;GD&lt;/h3&gt;</span><br><span class="line">                &lt;input</span><br><span class="line">                    type=&quot;button&quot;</span><br><span class="line">                    onClick=&#123;()=&gt;&#123;</span><br><span class="line">                        this.setState(&#123;</span><br><span class="line">                            shrinkState: false</span><br><span class="line">                        &#125;)</span><br><span class="line">                    &#125;&#125;</span><br><span class="line">                    value=&#123;this.props.name&#125;</span><br><span class="line">                /&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    componentDidMount() &#123;</span><br><span class="line">        console.log(&apos;componentDidMount&apos;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    componentWillReceiveProps() &#123;</span><br><span class="line">        console.log(&apos;componentWillReceiveProps: 父组件修改属性触发&apos;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    shouldComponentUpdate() &#123;</span><br><span class="line">        console.log(&apos;shouldComponentUpdate&apos;)</span><br><span class="line">        return true</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    componentWillUpdate() &#123;</span><br><span class="line">        console.log(&apos;componentWillUpdate&apos;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    componentDidUpdate() &#123;</span><br><span class="line">        console.log(&apos;componentDidUpdate&apos;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    componentWillUnmount ()&#123;</span><br><span class="line">        console.log(&apos;componentWillUnmount&apos;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default GD</span><br></pre></td></tr></table></figure>
                    
                        
                    
                    
                        <p>
                            <a href="/2017/06/11/React/React生命周期/#post-footer" class="postShorten-excerpt_link link">
                                评论和共享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title" itemprop="headline">
                    
                        <a class="link-unstyled" href="/2017/06/11/React-router/history/">
                            react-router history
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time itemprop="datePublished" datetime="2017-06-11T10:57:56+08:00">
	
		    6月 11, 2017
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content" itemprop="articleBody">
                    <h1 id="histroy-属性"><a href="#histroy-属性" class="headerlink" title="histroy 属性"></a>histroy 属性</h1><p>Router组件的history属性，用来监听浏览器地址栏的变化，并将URL解析成一个地址对象，供 <code>React Router</code> 匹配。<br>history属性，一共可以设置三种值。</p>
<ul>
<li><code>browserHistory</code></li>
<li><code>hashHistory</code></li>
<li><code>createMemoryHistory</code><br>如果设为 <code>hashHistory</code>，路由将通过URL的hash部分（#）切换，URL的形式类似 <code>example.com/#/some/path</code>。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import &#123; hashHistory &#125; from &apos;react-router&apos;</span><br><span class="line"></span><br><span class="line">render(</span><br><span class="line">  &lt;Router history=&#123;hashHistory&#125; routes=&#123;routes&#125; /&gt;,</span><br><span class="line">  document.getElementById(&apos;app&apos;)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>如果设为 <code>browserHistory</code>，浏览器的路由就不再通过Hash完成了，而显示正常的路径 <code>example.com/some/path</code>，背后调用的是浏览器的 <code>History API</code>。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import &#123; browserHistory &#125; from &apos;react-router&apos;</span><br><span class="line"></span><br><span class="line">render(</span><br><span class="line">  &lt;Router history=&#123;browserHistory&#125; routes=&#123;routes&#125; /&gt;,</span><br><span class="line">  document.getElementById(&apos;app&apos;)</span><br><span class="line">)</span><br></pre></td></tr></table></figure></p>
<p>但是，这种情况需要对服务器改造。否则用户直接向服务器请求某个子路由，会显示网页找不到的404错误。<br>如果开发服务器使用的是 <code>webpack-dev-server</code>，加上 <code>--history-api-fallback</code>参数就可以了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ webpack-dev-server --inline --content-base . --history-api-fallback</span><br></pre></td></tr></table></figure>
<p>或者在 <code>webpack.config.js</code> 配置<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">devServer: &#123;</span><br><span class="line">    historyApiFallback: true,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></p>
<p>createMemoryHistory主要用于服务器渲染。它创建一个内存中的history对象，不与浏览器URL互动。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const history = createMemoryHistory(location)</span><br></pre></td></tr></table></figure>
                    
                        
                    
                    
                        <p>
                            <a href="/2017/06/11/React-router/history/#post-footer" class="postShorten-excerpt_link link">
                                评论和共享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title" itemprop="headline">
                    
                        <a class="link-unstyled" href="/2017/06/05/UML/UML类图几种关系总结/">
                            UML类图几种关系总结
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time itemprop="datePublished" datetime="2017-06-05T08:59:18+08:00">
	
		    6月 05, 2017
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content" itemprop="articleBody">
                    <p> 在UML类图中，常见的有以下几种关系: 泛化（Generalization）,  实现（Realization），关联（Association)，聚合（Aggregation），组合(Composition)，依赖(Dependency)</p>
<h2 id="泛化（Generalization）"><a href="#泛化（Generalization）" class="headerlink" title="泛化（Generalization）"></a>泛化（Generalization）</h2><p>【泛化关系】：是一种继承关系，表示一般与特殊的关系，它指定了子类如何特化父类的所有特征和行为。例如：老虎是动物的一种，即有老虎的特性也有动物的共性。</p>
<p>【箭头指向】：带三角箭头的实线，箭头指向父类</p>
<p><img src="http://cdn.shianqi.com/20171110093119_aWwxF4_fanhua.png" alt="泛化"></p>
<h2 id="实现（Realization）"><a href="#实现（Realization）" class="headerlink" title="实现（Realization）"></a>实现（Realization）</h2><p>【实现关系】：是一种类与接口的关系，表示类是接口所有特征和行为的实现.</p>
<p>【箭头指向】：带三角箭头的虚线，箭头指向接口</p>
<p><img src="http://cdn.shianqi.com/20171110093251_tdgfn8_shixian.png" alt="泛化"></p>
<h2 id="关联（Association"><a href="#关联（Association" class="headerlink" title="关联（Association)"></a>关联（Association)</h2><p>【关联关系】：是一种拥有的关系，它使一个类知道另一个类的属性和方法；如：老师与学生，丈夫与妻子关联可以是双向的，也可以是单向的。双向的关联可以有两个箭头或者没有箭头，单向的关联有一个箭头。</p>
<p>【代码体现】：成员变量</p>
<p>【箭头及指向】：带普通箭头的实心线，指向被拥有者</p>
<p><img src="http://cdn.shianqi.com/20171110093215_1OgAUm_guanlian.png" alt="关联"></p>
<p>上图中，老师与学生是双向关联，老师有多名学生，学生也可能有多名老师。但学生与某课程间的关系为单向关联，一名学生可能要上多门课程，课程是个抽象的东西他不拥有学生。 </p>
<h2 id="聚合（Aggregation）"><a href="#聚合（Aggregation）" class="headerlink" title="聚合（Aggregation）"></a>聚合（Aggregation）</h2><p>【聚合关系】：是整体与部分的关系，且部分可以离开整体而单独存在。如车和轮胎是整体和部分的关系，轮胎离开车仍然可以存在。</p>
<p>聚合关系是关联关系的一种，是强的关联关系；关联和聚合在语法上无法区分，必须考察具体的逻辑关系。</p>
<p>【代码体现】：成员变量</p>
<p>【箭头及指向】：带空心菱形的实心线，菱形指向整体</p>
<p><img src="http://cdn.shianqi.com/20171110093321_wLY5lK_juhe.png" alt="聚合"></p>
<h2 id="组合-Composition"><a href="#组合-Composition" class="headerlink" title="组合(Composition)"></a>组合(Composition)</h2><p>【组合关系】：是整体与部分的关系，但部分不能离开整体而单独存在。如公司和部门是整体和部分的关系，没有公司就不存在部门。</p>
<p>组合关系是关联关系的一种，是比聚合关系还要强的关系，它要求普通的聚合关系中代表整体的对象负责代表部分的对象的生命周期。</p>
<p>【代码体现】：成员变量</p>
<p>【箭头及指向】：带实心菱形的实线，菱形指向整体</p>
<p><img src="http://cdn.shianqi.com/20171110093352_kyBieM_zuhe.png" alt="泛化"></p>
<h2 id="依赖-Dependency"><a href="#依赖-Dependency" class="headerlink" title="依赖(Dependency)"></a>依赖(Dependency)</h2><p>【依赖关系】：是一种使用的关系，即一个类的实现需要另一个类的协助，所以要尽量不使用双向的互相依赖.</p>
<p>【代码表现】：局部变量、方法的参数或者对静态方法的调用</p>
<p>【箭头及指向】：带箭头的虚线，指向被使用者</p>
<p><img src="http://cdn.shianqi.com/20171110093406_Tqe2wK_yilai.png" alt="泛化"></p>
<h2 id="各种关系的强弱顺序"><a href="#各种关系的强弱顺序" class="headerlink" title="各种关系的强弱顺序"></a>各种关系的强弱顺序</h2><p><strong>泛化 = 实现 &gt; 组合 &gt; 聚合 &gt; 关联 &gt; 依赖</strong></p>

                    
                        
                    
                    
                        <p>
                            <a href="/2017/06/05/UML/UML类图几种关系总结/#post-footer" class="postShorten-excerpt_link link">
                                评论和共享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title" itemprop="headline">
                    
                        <a class="link-unstyled" href="/2017/06/02/Redux/Object_Spread_Operator/">
                            Redux 中使用 Object Spread Operator （...）
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time itemprop="datePublished" datetime="2017-06-02T22:00:11+08:00">
	
		    6月 02, 2017
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content" itemprop="articleBody">
                    <h1 id="Redux-中使用-Object-Spread-Operator-（…）"><a href="#Redux-中使用-Object-Spread-Operator-（…）" class="headerlink" title="Redux 中使用 Object Spread Operator （…）"></a>Redux 中使用 Object Spread Operator （…）</h1><p><strong>ES7 Stage 3 阶段</strong></p>
<p>不直接修改 <code>state</code> 是 <code>Redux</code> 的核心理念之一, 所以你会发现自己总是在使用 <code>Object.assign()</code> 创建对象拷贝, 而拷贝中会包含新创建或更新过的属性值。在下面的 todoApp 示例中, <code>Object.assign()</code> 将会返回一个新的 <code>state</code> 对象, 而其中的 <code>visibilityFilter</code> 属性被更新了:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">function todoApp(state = initialState, action) &#123;</span><br><span class="line">  switch (action.type) &#123;</span><br><span class="line">    case SET_VISIBILITY_FILTER:</span><br><span class="line">      return Object.assign(&#123;&#125;, state, &#123;</span><br><span class="line">        visibilityFilter: action.filter</span><br><span class="line">      &#125;)</span><br><span class="line">    default:</span><br><span class="line">      return state</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>尽管这样可行, 但 <code>Object.assign()</code> 冗长的写法会迅速降低 <code>reducer</code> 的可读性。</p>
<p>一个可行的替代方案是使用ES7的<a href="https://github.com/sebmarkbage/ecmascript-rest-spread" target="_blank" rel="external">对象展开语法</a>提案。该提案让你可以通过展开运算符 <code>(...)</code> , 以更加简洁的形式将一个对象的可枚举属性拷贝至另一个对象。对象展开运算符在概念上与<code>ES6</code>的<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_operator" target="_blank" rel="external">数组展开运算符</a>相似</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">function todoApp(state = initialState, action) &#123;</span><br><span class="line">  switch (action.type) &#123;</span><br><span class="line">    case SET_VISIBILITY_FILTER:</span><br><span class="line">      return &#123; ...state, visibilityFilter: action.filter &#125;</span><br><span class="line">    default:</span><br><span class="line">      return state</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>目前对象展开运算符提案还处于 ES7 Stage 2 草案阶段, 若你想在产品中使用它得依靠转换编译器, 如 Babel。 你可以使用 es2015 预设值, 安装 <code>babel-plugin-transform-object-rest-spread</code> 并将其单独添加到位于 <code>.babelrc</code> 的 <code>plugins</code> 数组中。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;presets&quot;: [&quot;es2015&quot;],</span><br><span class="line">  &quot;plugins&quot;: [&quot;transform-object-rest-spread&quot;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

                    
                        
                    
                    
                        <p>
                            <a href="/2017/06/02/Redux/Object_Spread_Operator/#post-footer" class="postShorten-excerpt_link link">
                                评论和共享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title" itemprop="headline">
                    
                        <a class="link-unstyled" href="/2017/05/31/Redux/Redux/">
                            Redux 笔记
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time itemprop="datePublished" datetime="2017-05-31T15:13:16+08:00">
	
		    5月 31, 2017
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content" itemprop="articleBody">
                    <h1 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h1><h2 id="动机"><a href="#动机" class="headerlink" title="动机"></a>动机</h2><p><code>JavaScript</code> 需要更多的 <code>state</code>，<code>Redux</code> 试图让 <code>state</code> 的变化变得可预测。</p>
<h2 id="三大原则"><a href="#三大原则" class="headerlink" title="三大原则"></a>三大原则</h2><h3 id="单一数据源"><a href="#单一数据源" class="headerlink" title="单一数据源"></a>单一数据源</h3><p>整个应用的 <code>state</code> 被储存在一棵 <code>object tree</code> 中，并且这个 <code>object tree</code> 只存在于唯一一个 <code>store</code> 中</p>
<h3 id="State-是只读的"><a href="#State-是只读的" class="headerlink" title="State 是只读的"></a>State 是只读的</h3><p>惟一改变 <code>state</code> 的方法就是触发 <code>action</code>，<code>action</code>(表达想要修改的意图) 是一个用于描述已发生事件的普通对象。</p>
<h3 id="使用纯函数来执行修改"><a href="#使用纯函数来执行修改" class="headerlink" title="使用纯函数来执行修改"></a>使用纯函数来执行修改</h3><p>为了描述 <code>action</code> 如何改变 <code>state tree</code> ，你需要编写 <code>reducers</code>。</p>
<p>Reducer 只是一些纯函数，它接收先前的 state 和 action，并返回新的 state。</p>
<h1 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h1><h2 id="Action"><a href="#Action" class="headerlink" title="Action"></a>Action</h2><p>Action 是把数据从应用传到 store 的有效载荷。它是 store 数据的唯一来源。一般来说你会通过 store.dispatch() 将 action 传到 store。</p>
<p>Action 本质上是 JavaScript 普通对象。我们约定，action 内必须使用一个字符串类型的 type 字段来表示将要执行的动作。</p>
<p>例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  type: ADD_TODO,</span><br><span class="line">  text: &apos;Build my first Redux app&apos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>action 对象的结构完全由自己决定，但是为了多人合作方便，最好遵循一定的标准 <a href="https://github.com/acdlite/flux-standard-action" target="_blank" rel="external">Flux 标准 Action</a></p>
<p><code>store</code> 里能直接通过 <code>store.dispatch()</code> 调用 <code>dispatch()</code></p>
<p>但是多数情况下你会使用 <a href="http://github.com/gaearon/react-redux" target="_blank" rel="external"><code>react-redux</code></a> 提供的 <code>connect()</code> 帮助器来调用。<a href="http://www.redux.org.cn/docs/api/bindActionCreators.html" target="_blank" rel="external"><code>bindActionCreators()</code></a> 可以自动把多个 <code>action</code> 创建函数 绑定到 <code>dispatch()</code> 方法上。</p>
<h2 id="Reducer"><a href="#Reducer" class="headerlink" title="Reducer"></a>Reducer</h2><h3 id="处理-action"><a href="#处理-action" class="headerlink" title="处理 action"></a>处理 action</h3><p><code>reducer</code> 就是一个纯函数，接收旧的 <code>state</code> 和 <code>action</code>，返回新的 <code>state</code>。持 reducer 纯净非常重要。永远不要在 reducer 里做这些操作：</p>
<ul>
<li>修改传入参数</li>
<li>执行有副作用的操作，如 API 请求和路由跳转</li>
<li>调用非纯函数，如 Date.now() 或 Math.random()</li>
</ul>
<p>建议你尽可能地把 <code>state</code> 范式化，不存在嵌套。把应用的 <code>state</code> 想像成数据库。只要传入参数相同，返回计算得到的下一个 <code>state</code> 就一定相同。没有特殊情况、没有副作用，没有 <code>API</code> 请求、没有变量修改，单纯执行计算。</p>
<p><strong>注意:</strong></p>
<ul>
<li>不要修改 <code>state</code>，使用 <code>Object.assign()</code> 新建了一个副本。不能这样使用 <code>Object.assign(state, { visibilityFilter: action.filter })</code>，因为它会改变第一个参数的值。你必须把第一个参数设置为空对象。你也可以开启对ES7提案对象展开运算符的支持, 从而使用 <code>{ ...state, ...newState }</code> 达到相同的目的。</li>
<li>在 <code>default</code> 情况下返回旧的 <code>state</code></li>
</ul>
<h3 id="拆分-Reducer"><a href="#拆分-Reducer" class="headerlink" title="拆分 Reducer"></a>拆分 Reducer</h3><p><code>Redux</code> 提供了 <code>combineReducers()</code> 工具类来合并拆分的 <code>Reducer</code></p>
<h2 id="Store"><a href="#Store" class="headerlink" title="Store"></a>Store</h2><p><strong>Redux 应用只有一个单一的 store</strong></p>
<p>Store 就是把 <code>Action</code>，<code>Reducer</code> 联系到一起的对象。Store 有以下职责：</p>
<ul>
<li>维持应用的 state；</li>
<li>提供 getState() 方法获取 state；</li>
<li>提供 dispatch(action) 方法更新 state；</li>
<li>通过 subscribe(listener) 注册监听器;</li>
<li>通过 subscribe(listener) 返回的函数注销监听器。</li>
</ul>
<p><code>createStore()</code> 的第二个参数是可选的, 用于设置 <code>state</code> 初始状态。</p>
<h2 id="数据流"><a href="#数据流" class="headerlink" title="数据流"></a>数据流</h2><p><strong>严格的单向数据流</strong>是 Redux 架构的设计核心。</p>
<p>Redux 应用中数据的生命周期遵循下面 4 个步骤：</p>
<ol>
<li>调用 <code>store.dispatch(action)</code></li>
<li><p><code>Redux store</code> 调用传入的 <code>reducer</code> 函数。</p>
<p> Store 会把两个参数传入 reducer： 当前的 state 树和 action。</p>
</li>
<li>根 reducer 应该把多个子 reducer 输出合并成一个单一的 state 树。</li>
<li>Redux store 保存了根 reducer 返回的完整 state 树。 </li>
</ol>
<h2 id="搭配-React"><a href="#搭配-React" class="headerlink" title="搭配 React"></a>搭配 React</h2><h3 id="安装-React-Redux"><a href="#安装-React-Redux" class="headerlink" title="安装 React Redux"></a>安装 React Redux</h3><p>Redux 默认并不包含 React 绑定库，需要单独安装。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save react-redux</span><br></pre></td></tr></table></figure></p>
<h3 id="connect"><a href="#connect" class="headerlink" title="connect()"></a>connect()</h3><p>我们想要通过 <code>react-redux</code> 提供的 <code>connect()</code> 方法将包装好的组件连接到 <code>Redux</code>。尽量只做一个顶层的组件，或者 <code>route</code> 处理。从技术上来说你可以将应用中的任何一个组件 <code>connect()</code> 到 <code>Redux store</code> 中，但尽量避免这么做，因为这个数据流很难追踪。</p>
<p><strong>任何一个从 <code>connect()</code> 包装好的组件都可以得到一个 <code>dispatch</code> 方法作为组件的 <code>props</code>，以及得到全局 <code>state</code> 中所需的任何内容。</strong><code>connect()</code> 的唯一参数是 <strong><code>selector</code></strong>。此方法可以从 <code>Redux store</code> 接收到全局的 <code>state</code>，然后返回组件中需要的 <code>props</code>。最简单的情况下，可以返回一个初始的 <code>state</code> （例如，返回认证方法），但最好先将其进行转化。</p>
<p><code>selector</code>  的作用就是为 <code>React Components</code> 构造适合自己需要的状态视图。是一个自定义函数，selector 的实现完全是自定义函数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">import &#123; connect &#125; from &apos;react-redux&apos;;</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">class App extends Component &#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    // 通过调用 connect() 注入:</span><br><span class="line">    const &#123; dispatch, visibleTodos, visibilityFilter &#125; = this.props</span><br><span class="line">    return (</span><br><span class="line">      ...</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">App.propTypes = &#123;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 基于全局 state ，哪些是我们想注入的 props ?</span><br><span class="line">// 注意：使用 https://github.com/reactjs/reselect 效果更佳。</span><br><span class="line">function select(state) &#123;</span><br><span class="line">  return &#123;</span><br><span class="line">    visibilityFilter: state.visibilityFilter</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 包装 component ，注入 dispatch 和 state 到其默认的 connect(select)(App) 中；</span><br><span class="line">export default connect(select)(App);</span><br></pre></td></tr></table></figure>
<p><code>reselect</code> 这个项目提供了带 <code>cache</code> 功能的 <code>selector</code>。如果  <code>Store/State</code> 和构造 <code>view</code> 的参数没有变化，那么每次 <code>Component</code> 获取的数据都将来自于上次调用/计算的结果。得益于 <code>Store/State Immutable</code> 的本质，状态变化的检测是非常高效的。</p>
<h1 id="高级"><a href="#高级" class="headerlink" title="高级"></a>高级</h1><h2 id="异步Action"><a href="#异步Action" class="headerlink" title="异步Action"></a>异步Action</h2><p>当调用异步 API 时，有两个非常关键的时刻：发起请求的时刻，和接收到响应的时刻 （也可能是超时）。</p>
<p>这两个时刻都可能会更改应用的 state；为此，你需要 dispatch 普通的同步 action。一般情况下，每个 API 请求都需要 dispatch 至少三种 action：</p>
<ol>
<li><p>一种通知 reducer 请求开始的 action。</p>
<p> 对于这种 action，reducer 可能会切换一下 state 中的 isFetching 标记。以此来告诉 UI 来显示进度条。</p>
</li>
<li><p>一种通知 reducer 请求成功结束的 action。</p>
<p> 对于这种 action，reducer 可能会把接收到的新数据合并到 state 中，并重置 isFetching。UI 则会隐藏进度条，并显示接收到的数据。</p>
</li>
<li><p>一种通知 reducer 请求失败的 action。</p>
<p> 对于这种 action，reducer 可能会重置 isFetching。或者，有些 reducer 会保存这些失败信息，并在 UI 里显示出来。</p>
</li>
</ol>
<p>为了区分这三种 action，可能在 action 里添加一个专门的 status 字段作为标记位：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123; type: &apos;FETCH_POSTS&apos; &#125;</span><br><span class="line">&#123; type: &apos;FETCH_POSTS&apos;, status: &apos;error&apos;, error: &apos;Oops&apos; &#125;</span><br><span class="line">&#123; type: &apos;FETCH_POSTS&apos;, status: &apos;success&apos;, response: &#123; ... &#125; &#125;</span><br></pre></td></tr></table></figure>
<p>又或者为它们定义不同的 type：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123; type: &apos;FETCH_POSTS_REQUEST&apos; &#125;</span><br><span class="line">&#123; type: &apos;FETCH_POSTS_FAILURE&apos;, error: &apos;Oops&apos; &#125;</span><br><span class="line">&#123; type: &apos;FETCH_POSTS_SUCCESS&apos;, response: &#123; ... &#125; &#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="异步-Action-Creator"><a href="#异步-Action-Creator" class="headerlink" title="异步 Action Creator"></a>异步 Action Creator</h2><p>如何把之前定义的同步 <code>action creator</code> 和 网络请求结合起来呢？标准的做法是使用 <code>Redux Thunk middleware</code>。要引入 <code>redux-thunk</code> 这个专门的库才能使用。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">import fetch from &apos;isomorphic-fetch&apos;</span><br><span class="line"></span><br><span class="line">export const REQUEST_POSTS = &apos;REQUEST_POSTS&apos;</span><br><span class="line">function requestPosts(subreddit) &#123;</span><br><span class="line">  return &#123;</span><br><span class="line">    type: REQUEST_POSTS,</span><br><span class="line">    subreddit</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export const RECEIVE_POSTS = &apos;RECEIVE_POSTS&apos;</span><br><span class="line">function receivePosts(subreddit, json) &#123;</span><br><span class="line">  return &#123;</span><br><span class="line">    type: RECEIVE_POSTS,</span><br><span class="line">    subreddit,</span><br><span class="line">    posts: json.data.children.map(child =&gt; child.data),</span><br><span class="line">    receivedAt: Date.now()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 来看一下我们写的第一个 thunk action creator！</span><br><span class="line">// 虽然内部操作不同，你可以像其它 action creator 一样使用它：</span><br><span class="line">// store.dispatch(fetchPosts(&apos;reactjs&apos;))</span><br><span class="line"></span><br><span class="line">export function fetchPosts(subreddit) &#123;</span><br><span class="line"></span><br><span class="line">  // Thunk middleware 知道如何处理函数。</span><br><span class="line">  // 这里把 dispatch 方法通过参数的形式传给函数，</span><br><span class="line">  // 以此来让它自己也能 dispatch action。</span><br><span class="line"></span><br><span class="line">  return function (dispatch) &#123;</span><br><span class="line"></span><br><span class="line">    // 首次 dispatch：更新应用的 state 来通知</span><br><span class="line">    // API 请求发起了。</span><br><span class="line"></span><br><span class="line">    dispatch(requestPosts(subreddit))</span><br><span class="line"></span><br><span class="line">    // thunk middleware 调用的函数可以有返回值，</span><br><span class="line">    // 它会被当作 dispatch 方法的返回值传递。</span><br><span class="line"></span><br><span class="line">    // 这个案例中，我们返回一个等待处理的 promise。</span><br><span class="line">    // 这并不是 redux middleware 所必须的，但这对于我们而言很方便。</span><br><span class="line"></span><br><span class="line">    return fetch(`http://www.subreddit.com/r/$&#123;subreddit&#125;.json`)</span><br><span class="line">      .then(response =&gt; response.json())</span><br><span class="line">      .then(json =&gt;</span><br><span class="line"></span><br><span class="line">        // 可以多次 dispatch！</span><br><span class="line">        // 这里，使用 API 请求结果来更新应用的 state。</span><br><span class="line"></span><br><span class="line">        dispatch(receivePosts(subreddit, json))</span><br><span class="line">      )</span><br><span class="line"></span><br><span class="line">      // 在实际应用中，还需要</span><br><span class="line">      // 捕获网络请求的异常。</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>本示例使用了 <code>fetch API</code>。它是替代 <code>XMLHttpRequest</code> 用来发送网络请求的非常新的 API。由于目前大多数浏览器原生还不支持它，建议你使用 <code>isomorphic-fetch</code> 库：</p>
<p>在底层，它在浏览器端使用 <code>whatwg-fetch</code> <code>polyfill</code>，在服务器端使用 <code>node-fetch</code>，所以如果当你把应用改成同构时，并不需要改变 API 请求。</p>

                    
                        
                    
                    
                        <p>
                            <a href="/2017/05/31/Redux/Redux/#post-footer" class="postShorten-excerpt_link link">
                                评论和共享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title" itemprop="headline">
                    
                        <a class="link-unstyled" href="/2017/05/29/Mocha/Mocha/">
                            Mocha 基本用法
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time itemprop="datePublished" datetime="2017-05-29T10:39:44+08:00">
	
		    5月 29, 2017
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content" itemprop="articleBody">
                    <h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install --global mocha</span><br></pre></td></tr></table></figure>
<h2 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var add = require(&apos;./add.js&apos;);</span><br><span class="line">var expect = require(&apos;chai&apos;).expect;</span><br><span class="line"></span><br><span class="line">describe(&apos;加法函数的测试&apos;, function() &#123;</span><br><span class="line">  it(&apos;1 加 1 应该等于 2&apos;, function() &#123;</span><br><span class="line">    expect(add(1, 1)).to.be.equal(2);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><code>describe</code> 块称为”测试套件”，表示一组相关的测试。可以嵌套多层。</p>
<p><code>it</code> 块称为”测试用例”，表示一个单独的测试，是测试的最小单位</p>
<p>通常，测试脚本与所要测试的源码脚本同名，但是后缀名为 <code>.test.js</code> （表示测试）或者 <code>.spec.js</code> （表示规格）</p>
<h2 id="断言库"><a href="#断言库" class="headerlink" title="断言库"></a>断言库</h2><p><code>Mocha</code> 本身不带断言库，所以必须先引入断言库。上面代码引入的断言库是 <code>chai</code>，并且指定使用它的 <code>expect</code> 断言风格。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">// 相等或不相等</span><br><span class="line">expect(4 + 5).to.be.equal(9);</span><br><span class="line">expect(4 + 5).to.be.not.equal(10);</span><br><span class="line">expect(foo).to.be.deep.equal(&#123; bar: &apos;baz&apos; &#125;);</span><br><span class="line"></span><br><span class="line">// 布尔值为true</span><br><span class="line">expect(&apos;everthing&apos;).to.be.ok;</span><br><span class="line">expect(false).to.not.be.ok;</span><br><span class="line"></span><br><span class="line">// typeof</span><br><span class="line">expect(&apos;test&apos;).to.be.a(&apos;string&apos;);</span><br><span class="line">expect(&#123; foo: &apos;bar&apos; &#125;).to.be.an(&apos;object&apos;);</span><br><span class="line">expect(foo).to.be.an.instanceof(Foo);</span><br><span class="line"></span><br><span class="line">// include</span><br><span class="line">expect([1,2,3]).to.include(2);</span><br><span class="line">expect(&apos;foobar&apos;).to.contain(&apos;foo&apos;);</span><br><span class="line">expect(&#123; foo: &apos;bar&apos;, hello: &apos;universe&apos; &#125;).to.include.keys(&apos;foo&apos;);</span><br><span class="line"></span><br><span class="line">// empty</span><br><span class="line">expect([]).to.be.empty;</span><br><span class="line">expect(&apos;&apos;).to.be.empty;</span><br><span class="line">expect(&#123;&#125;).to.be.empty;</span><br><span class="line"></span><br><span class="line">// match</span><br><span class="line">expect(&apos;foobar&apos;).to.match(/^foo/);</span><br></pre></td></tr></table></figure>
<h2 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h2><h4 id="recursive"><a href="#recursive" class="headerlink" title="--recursive"></a><code>--recursive</code></h4><p><code>Mocha</code> 默认只执行 <code>test</code> 子目录下面第一层的测试用例，不会执行更下层的用例。</p>
<p>为了改变这种行为，就必须加上 <code>--recursive</code> 参数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mocha --recursive</span><br></pre></td></tr></table></figure></p>
<h4 id="watch，-w"><a href="#watch，-w" class="headerlink" title="--watch，-w"></a><code>--watch，-w</code></h4><p>视指定的测试脚本。只要测试脚本有变化，就会自动运行Mocha</p>
<h2 id="配置文件-mocha-opts"><a href="#配置文件-mocha-opts" class="headerlink" title="配置文件 mocha.opts"></a>配置文件 <code>mocha.opts</code></h2><p><code>Mocha</code> 允许在test目录下面，放置配置文件 <code>mocha.opts</code>，把命令行参数写在里面。</p>
<p>然后，把这参数写入test目录下的mocha.opts文件。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">--reporter tap</span><br><span class="line">--recursive</span><br><span class="line">--growl</span><br></pre></td></tr></table></figure></p>
<p>然后，执行 <code>mocha</code> 就能取得一样的效果。</p>
<h2 id="ES6-测试"><a href="#ES6-测试" class="headerlink" title="ES6 测试"></a>ES6 测试</h2><p>如果测试脚本是用ES6写的，那么运行测试之前，需要先用Babel转码。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import add from &apos;../src/add.js&apos;;</span><br><span class="line">import chai from &apos;chai&apos;;</span><br><span class="line"></span><br><span class="line">let expect = chai.expect;</span><br><span class="line"></span><br><span class="line">describe(&apos;加法函数的测试&apos;, function() &#123;</span><br><span class="line">  it(&apos;1 加 1 应该等于 2&apos;, function() &#123;</span><br><span class="line">    expect(add(1, 1)).to.be.equal(2);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>ES6转码，需要安装Babel。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install babel-core babel-preset-es2015 --save-dev</span><br></pre></td></tr></table></figure></p>
<p>然后，在项目目录下面，新建一个 <code>.babelrc</code> 配置文件。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  &quot;presets&quot;: [ &quot;es2015&quot; ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>最后，使用 <code>--compilers</code> 参数指定测试脚本的转码器。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mocha --compilers js:babel-core/register</span><br></pre></td></tr></table></figure>
<p>Babel默认不会对Iterator、Generator、Promise、Map、Set等全局对象，以及一些全局对象的方法（比如Object.assign）转码。如果你想要对这些对象转码，就要安装babel-polyfill。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install babel-polyfill --save</span><br></pre></td></tr></table></figure>
<p>然后，在你的脚本头部加上一行。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import &apos;babel-polyfill&apos;</span><br></pre></td></tr></table></figure></p>
<h2 id="异步测试"><a href="#异步测试" class="headerlink" title="异步测试"></a>异步测试</h2><p><code>Mocha</code> 默认每个测试用例最多执行 <code>2000</code> 毫秒，如果到时没有得到结果，就报错。对于涉及异步操作的测试用例，这个时间往往是不够的，需要用 <code>-t</code> 或 <code>--timeout</code> 参数指定超时门槛。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">it(&apos;测试应该5000毫秒后结束&apos;, function(done) &#123;</span><br><span class="line">  var x = true;</span><br><span class="line">  var f = function() &#123;</span><br><span class="line">    x = false;</span><br><span class="line">    expect(x).to.be.not.ok;</span><br><span class="line">    done(); // 通知Mocha测试结束</span><br><span class="line">  &#125;;</span><br><span class="line">  setTimeout(f, 4000);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ mocha -t 5000 timeout.test.js</span><br></pre></td></tr></table></figure>
<h2 id="测试用例的钩子"><a href="#测试用例的钩子" class="headerlink" title="测试用例的钩子"></a>测试用例的钩子</h2><p><code>Mocha</code> 在 <code>describe</code> 块之中，提供测试用例的四个钩子：  <code>before()</code> 、 <code>after()</code> 、 <code>beforeEach()</code> 和 <code>afterEach()</code>。它们会在指定时间执行。</p>
<ul>
<li><code>before()</code> 在本区块的所有测试用例之前执行</li>
<li><code>after()</code> 在本区块的所有测试用例之后执行</li>
<li><code>beforeEach()</code> 在本区块的每个测试用例之前执行</li>
<li><code>afterEach()</code> 在本区块的每个测试用例之后执行</li>
</ul>

                    
                        
                    
                    
                        <p>
                            <a href="/2017/05/29/Mocha/Mocha/#post-footer" class="postShorten-excerpt_link link">
                                评论和共享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title" itemprop="headline">
                    
                        <a class="link-unstyled" href="/2017/05/24/JavaScript/Touch_Passive/">
                            addEventListener passive 属性
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time itemprop="datePublished" datetime="2017-05-24T21:56:14+08:00">
	
		    5月 24, 2017
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content" itemprop="articleBody">
                    <p><strong>如果不阻止默认行为，使用 <code>{passive: true}</code> 能够有效的增加流畅度</strong></p>
<h2 id="passive-的事件监听器"><a href="#passive-的事件监听器" class="headerlink" title="passive 的事件监听器"></a>passive 的事件监听器</h2><p>很久以前，<code>addEventListener()</code> 的参数约定是这样的：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">addEventListener(type, listener, useCapture)</span><br></pre></td></tr></table></figure></p>
<p>后来，最后一个参数，也就是控制监听器是在捕获阶段执行还是在冒泡阶段执行的 <code>useCapture</code> 参数，变成了可选参数（传 true 的情况太少了）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">addEventListener(type, listener[, useCapture ])</span><br></pre></td></tr></table></figure>
<p>2015 年底，DOM 规范做了修订：<code>addEventListener()</code> 的第三个参数可以是个对象值了，也就是说第三个参数现在可以是两种类型的值了：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">addEventListener(type, listener[, useCapture ])</span><br><span class="line">addEventListener(type, listener[, options ])</span><br></pre></td></tr></table></figure>
<p>这个修订是为了扩展新的选项，从而自定义更多的行为，目前规范中 <code>options</code> 对象可用的属性有三个：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">addEventListener(type, listener, &#123;</span><br><span class="line">    capture: false,</span><br><span class="line">    passive: false,</span><br><span class="line">    once: false</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>三个属性都是布尔类型，默认值都为 <code>false</code>。</p>
<ol>
<li><code>capture</code> 属性等价于以前的 <code>useCapture</code> 参数</li>
<li><code>once</code> 属性就是表明该监听器是一次性的，执行一次后就被自动 <code>removeEventListener</code> 掉，还没有浏览器实现它；</li>
<li><code>passive</code> 属性 Firefox 和 Chrome 已经实现</li>
</ol>
<p>浏览器无法预先知道一个监听器会不会调用 <code>preventDefault()</code>，它能做的只有等监听器执行完后再去执行默认行为，而监听器执行是要耗时的，有些甚至耗时很明显，这样就会导致页面卡顿。视频里也说了，即便监听器是个空函数，也会产生一定的卡顿，毕竟空函数的执行也会耗时。</p>
<p>有 80% 的滚动事件监听器是不会阻止默认行为的，也就是说大部分情况下，浏览器是白等了。所以，<code>passive</code> 监听器诞生了，<code>passive</code> 的意思是“顺从的”，表示它不会对事件的默认行为说 no，浏览器知道了一个监听器是 <code>passive</code> 的，它就可以在两个线程里同时执行监听器中的 <code>JavaScript</code> 代码和浏览器的默认行为了。</p>
<p><strong>如果不阻止默认行为，使用 <code>{passive: true}</code> 能够有效的增加流畅度</strong></p>
<p>假如不小心在 <code>passive</code> 的监听器里调用了 <code>preventDefault()</code>，也无妨，因为 <code>preventDefault()</code> 不会产生任何效果，但开发者工具会发出警告。</p>
<p>Chrome 发现耗时超过 100 毫秒的非 <code>passive</code> 的监听器，警告你加上 <code>{passive: true}</code></p>
<h2 id="何时调用-removeEventListener"><a href="#何时调用-removeEventListener" class="headerlink" title="何时调用 removeEventListener"></a>何时调用 removeEventListener</h2><p>第三个参数是布尔值的时候，<code>addEventListener(&quot;foo&quot;, listener, true)</code> 添加的监听器，必须用 <code>removeEventListener(&quot;foo&quot;, listener, true)</code> 才能删除掉。因为这个监听器也有可能还注册在了冒泡阶段，那样的话，同一个监听器实际上对应着两个监听器对象</p>
<ul>
<li>如果要移除事件句柄，addEventListener() 的执行函数必须使用外部函数</li>
<li>类似 <code>document.removeEventListener(&quot;event&quot;, function(){ myScript });</code> 该事件是无法移除的。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">var div1 = document.getElementById(&quot;div1&quot;);</span><br><span class="line"></span><br><span class="line">function listener(e)&#123;</span><br><span class="line">	console.log(&quot;div listener&quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">div1.addEventListener(&apos;mousedown&apos;, listener, true);</span><br><span class="line"></span><br><span class="line">div1.removeEventListener(&quot;mousedown&quot;, listener, true);</span><br></pre></td></tr></table></figure>
<p>那现在 <code>addEventListener(&quot;foo&quot;, listener, {passive: true})</code> 添加的监听器只要 <code>removeEventListener(&quot;foo&quot;, listener)</code> 就可以了</p>
<p>所以说在 removeEventListener 的时候永远不需写 passive 和 once，但 capture 可能要</p>

                    
                        
                    
                    
                        <p>
                            <a href="/2017/05/24/JavaScript/Touch_Passive/#post-footer" class="postShorten-excerpt_link link">
                                评论和共享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title" itemprop="headline">
                    
                        <a class="link-unstyled" href="/2017/05/24/React/React-Touch/">
                            React Touch 事件
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time itemprop="datePublished" datetime="2017-05-24T18:02:24+08:00">
	
		    5月 24, 2017
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content" itemprop="articleBody">
                    <h2 id="兼容性"><a href="#兼容性" class="headerlink" title="兼容性"></a>兼容性</h2><p>经测试，兼容 ie9+ 主流浏览器</p>
<h2 id="手机单击触发事件"><a href="#手机单击触发事件" class="headerlink" title="手机单击触发事件"></a>手机单击触发事件</h2><h5 id="Chrome"><a href="#Chrome" class="headerlink" title="Chrome"></a>Chrome</h5><p><code>onTouchStart</code> -&gt; <code>onTouchEnd</code> -&gt; <code>onMouseDown</code> -&gt; <code>onMouseUp</code></p>
<h5 id="Firefox"><a href="#Firefox" class="headerlink" title="Firefox"></a>Firefox</h5><p><code>onTouchStart</code> -&gt; <code>onTouchEnd</code> -&gt; <code>onMouseDown</code> -&gt; <code>onMouseMove</code> -&gt; <code>onMouseUp</code></p>
<h2 id="手机触摸移动触发事件"><a href="#手机触摸移动触发事件" class="headerlink" title="手机触摸移动触发事件"></a>手机触摸移动触发事件</h2><h5 id="Chrome-1"><a href="#Chrome-1" class="headerlink" title="Chrome"></a>Chrome</h5><p><code>onTouchStart</code> -&gt;  <code>onTouchMove</code>  -&gt; <code>onTouchEnd</code> </p>
<h5 id="Firefox-1"><a href="#Firefox-1" class="headerlink" title="Firefox"></a>Firefox</h5><p><code>onTouchStart</code> -&gt; <code>onTouchMove</code> -&gt; <code>onTouchEnd</code> -&gt; <code>onMouseDown</code> -&gt; <code>onMouseMove</code> -&gt; <code>onMouseUp</code></p>
<h2 id="获取坐标方式"><a href="#获取坐标方式" class="headerlink" title="获取坐标方式"></a>获取坐标方式</h2><table>
<thead>
<tr>
<th>事件</th>
<th>方法</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>onMouseDown</code></td>
<td><code>const {pageX, pageY} = e;</code></td>
</tr>
<tr>
<td><code>onMouseMove</code></td>
<td><code>const {pageX, pageY} = e;</code></td>
</tr>
<tr>
<td><code>onMouseUp</code></td>
<td><code>const {pageX, pageY} = e;</code></td>
</tr>
<tr>
<td><code>onTouchStart</code></td>
<td><code>const {pageX,pageY} = e.touches[0];</code></td>
</tr>
<tr>
<td><code>onTouchMove</code></td>
<td><code>const {pageX, pageY} = e.touches[0];</code></td>
</tr>
<tr>
<td><code>onTouchEnd</code></td>
<td><code>const {clientX, clientY} = e.changedTouches[0];</code></td>
</tr>
</tbody>
</table>
<h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">import React,&#123; Component &#125; from &apos;react&apos;;</span><br><span class="line">import styles from &apos;./App.css&apos;;</span><br><span class="line"></span><br><span class="line">class App extends Component &#123;</span><br><span class="line">    constructor(props) &#123;</span><br><span class="line">        super(props);</span><br><span class="line">        this.checked = false;</span><br><span class="line"></span><br><span class="line">        this.handleMouseDown = this.handleMouseDown.bind(this);</span><br><span class="line">        this.handleMouseMove = this.handleMouseMove.bind(this);</span><br><span class="line">        this.handleMouseUp = this.handleMouseUp.bind(this);</span><br><span class="line"></span><br><span class="line">        this.handleTouchStart = this.handleTouchStart.bind(this);</span><br><span class="line">        this.handleTouchMove = this.handleTouchMove.bind(this);</span><br><span class="line">        this.handleTouchEnd = this.handleTouchEnd.bind(this);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    handleTouchStart(e)&#123;</span><br><span class="line">        const &#123;pageX,pageY&#125; = e.touches[0];</span><br><span class="line">        console.log(&quot;handleTouchStart&quot;, pageX, pageY);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    handleTouchMove(e)&#123;</span><br><span class="line">		const &#123;pageX, pageY&#125; = e.touches[0];</span><br><span class="line">        console.log(&quot;handleTouchMove&quot;, pageX, pageY);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">    handleTouchEnd(e)&#123;</span><br><span class="line">		const &#123;clientX, clientY&#125; = e.changedTouches[0];</span><br><span class="line">		console.log(&quot;handleTouchEnd&quot;, clientX, clientY);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">    handleMouseDown(e)&#123;</span><br><span class="line">        this.checked = true;</span><br><span class="line">        console.log(&quot;handleMouseDown&quot;, e.pageX, e.pageY);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    handleMouseMove(e)&#123;</span><br><span class="line">        if(this.checked)</span><br><span class="line">            console.log(&quot;handleMouseMove&quot;, e.pageX, e.pageY);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    handleMouseUp(e)&#123;</span><br><span class="line">        this.checked = false;</span><br><span class="line">        console.log(&quot;handleMouseUp&quot;, e.pageX, e.pageY);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    render()&#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;div className=&#123;styles.app&#125;&gt;</span><br><span class="line">                &lt;h2&gt;Hello, Nice&lt;/h2&gt;</span><br><span class="line">                &lt;div className=&#123;styles.touchBox&#125;</span><br><span class="line">                     onMouseDown=&#123;this.handleMouseDown&#125;</span><br><span class="line">                     onMouseMove=&#123;this.handleMouseMove&#125;</span><br><span class="line">                     onMouseUp=&#123;this.handleMouseUp&#125;</span><br><span class="line"></span><br><span class="line">                     onTouchStart=&#123;this.handleTouchStart&#125;</span><br><span class="line">                     onTouchMove=&#123;this.handleTouchMove&#125;</span><br><span class="line">                     onTouchEnd=&#123;this.handleTouchEnd&#125;</span><br><span class="line">                /&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default App;</span><br></pre></td></tr></table></figure>
                    
                        
                    
                    
                        <p>
                            <a href="/2017/05/24/React/React-Touch/#post-footer" class="postShorten-excerpt_link link">
                                评论和共享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title" itemprop="headline">
                    
                        <a class="link-unstyled" href="/2017/05/22/Git/git/">
                            Git 常用命令
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time itemprop="datePublished" datetime="2017-05-22T15:17:24+08:00">
	
		    5月 22, 2017
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content" itemprop="articleBody">
                    <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="//music.163.com/outchain/player?type=2&id=32717985&auto=0&height=66"></iframe>

<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><h4 id="源码安装："><a href="#源码安装：" class="headerlink" title="源码安装："></a>源码安装：</h4><p>先安装依赖库<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ sudo yum install curl-devel expat-devel gettext-devel \</span><br><span class="line">   openssl-devel zlib-devel</span><br><span class="line">$ sudo apt-get install libcurl4-gnutls-dev libexpat1-dev gettext \</span><br><span class="line">   libz-dev libssl-dev</span><br></pre></td></tr></table></figure></p>
<p>为了能够添加更多格式的文档（如 doc, html, info），安装依赖包：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo yum install asciidoc xmlto docbook2x</span><br><span class="line">$ sudo apt-get install asciidoc xmlto docbook2x</span><br></pre></td></tr></table></figure></p>
<p>编译安装：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ tar -zxf git-2.0.0.tar.gz</span><br><span class="line">$ cd git-2.0.0</span><br><span class="line">$ make configure</span><br><span class="line">$ ./configure --prefix=/usr</span><br><span class="line">$ make all doc info</span><br><span class="line">$ sudo make install install-doc install-html install-info</span><br></pre></td></tr></table></figure></p>
<p>更新 git<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git clone git://git.kernel.org/pub/scm/git/git.git</span><br></pre></td></tr></table></figure></p>
<h2 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h2><table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>git init</code></td>
<td>创建版本库</td>
</tr>
<tr>
<td><code>git add &lt;file&gt;</code></td>
<td>把文件添加到仓库</td>
</tr>
<tr>
<td><code>git add -A</code></td>
<td>全部添加到仓库</td>
</tr>
<tr>
<td><code>git commit -m &quot;message&quot;</code></td>
<td>提交到仓库，并添加描述</td>
</tr>
<tr>
<td><code>git status</code></td>
<td>查看当前仓库状态</td>
</tr>
<tr>
<td><code>git diff</code></td>
<td>工作区(work dict)和暂存区(stage)的比较</td>
</tr>
<tr>
<td><code>git diff --cached</code></td>
<td>暂存区(stage)和分支(master)的比较</td>
</tr>
<tr>
<td><code>git diff HEAD -- &lt;file&gt;</code></td>
<td>查看工作区和版本库里面最新版本的区别</td>
</tr>
<tr>
<td><code>git log</code></td>
<td>查看提交历史</td>
</tr>
<tr>
<td><code>git reflog</code></td>
<td>记录操作命令</td>
</tr>
<tr>
<td><code>git reset --hard HEAD~n</code></td>
<td>回退n个版本</td>
</tr>
<tr>
<td><code>git reset --hard $id</code></td>
<td>回到 $id 版本</td>
</tr>
<tr>
<td><code>git checkout -- &lt;file&gt;</code></td>
<td>丢弃工作区的修改</td>
</tr>
<tr>
<td><code>git reset HEAD &lt;file&gt;</code></td>
<td>把暂存区的修改撤销掉</td>
</tr>
</tbody>
</table>
<h2 id="远程命令"><a href="#远程命令" class="headerlink" title="远程命令"></a>远程命令</h2><table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>git remote add origin &lt;git@address&gt;</code></td>
<td>关联远程库</td>
</tr>
<tr>
<td><code>git push -u origin master</code></td>
<td>把本地的master分支内容推送的远程新的master分支，还会把本地的master分支和远程的master分支关联起来</td>
</tr>
<tr>
<td><code>git push origin master</code></td>
<td>推送到远程</td>
</tr>
<tr>
<td><code>git clone &lt;git@address&gt;</code></td>
<td>克隆远程库到本地</td>
</tr>
<tr>
<td><code>git fetch</code></td>
<td>将远程分支信息获取到本地</td>
</tr>
</tbody>
</table>
<h2 id="分支管理"><a href="#分支管理" class="headerlink" title="分支管理"></a>分支管理</h2><table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>git branch</code></td>
<td>查看分支信息，带*为当前</td>
</tr>
<tr>
<td><code>git checkout -b &lt;branch-name&gt;</code></td>
<td>创建并切换到新分支</td>
</tr>
<tr>
<td><code>git checkout -b dev origin/dev</code></td>
<td>创建远程 <code>origin</code> 的 <code>dev</code> 分支到本地</td>
</tr>
<tr>
<td><code>git branch --set-upstream dev origin/dev</code></td>
<td>设置dev和origin/dev的链接</td>
</tr>
<tr>
<td><code>git branch &lt;branch-name&gt;</code></td>
<td>创建分支</td>
</tr>
<tr>
<td><code>git checkout &lt;branch-name&gt;</code></td>
<td>切换分支</td>
</tr>
<tr>
<td><code>git merge &lt;branch-name&gt;</code></td>
<td>合并某分支到当前分支</td>
</tr>
<tr>
<td><code>git merge --no-ff -m &quot;&lt;message&gt;&quot; &lt;branch-name&gt;</code></td>
<td>禁用<code>Fast forward</code>合并，可以看到合并历史</td>
</tr>
<tr>
<td><code>git branch -d &lt;branch-name&gt;</code></td>
<td>删除分支</td>
</tr>
<tr>
<td><code>git branch -D &lt;branch-name&gt;</code></td>
<td>丢弃一个没有合并的分支</td>
</tr>
<tr>
<td><code>git log --graph</code></td>
<td>查看分支合并图</td>
</tr>
</tbody>
</table>
<h2 id="分支策略"><a href="#分支策略" class="headerlink" title="分支策略"></a>分支策略</h2><table>
<thead>
<tr>
<th>分支</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>master</code></td>
<td>稳定，仅用来发布新版本，不能在上面干活</td>
</tr>
<tr>
<td><code>dev</code></td>
<td>不稳定，到达新版本合并到<code>master</code>上</td>
</tr>
</tbody>
</table>
<p><img src="http://cdn.shianqi.com/20171110002609_OvluW5_git.png" alt="分支"></p>
<p>每人都有自己的分支，时不时地往dev分支上合并就可以了。</p>
<p><code>master</code> 分支是主分支，因此要时刻与远程同步；</p>
<p><code>dev</code> 分支是开发分支，团队所有成员都需要在上面工作，所以也需要与远程同步；</p>
<p><code>bug</code> 分支只用于在本地修复bug，就没必要推到远程了，除非老板要看看你每周到底修复了几个bug；</p>
<p><code>feature</code> 分支是否推到远程，取决于你是否和你的小伙伴合作在上面开发。</p>
<h2 id="fork的项目与原作者同步"><a href="#fork的项目与原作者同步" class="headerlink" title="fork的项目与原作者同步"></a>fork的项目与原作者同步</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">git remote add ecmadao git@github.com:ecmadao/react-times.git</span><br><span class="line"></span><br><span class="line">git fetch ecmadao</span><br><span class="line"></span><br><span class="line">git merge ecmadao/master</span><br><span class="line"></span><br><span class="line">git push origin master</span><br></pre></td></tr></table></figure>
<h2 id="bug分支"><a href="#bug分支" class="headerlink" title="bug分支"></a>bug分支</h2><p>commit 时关闭 <code>issues</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit -m &quot;fix #&lt;issues-id&gt;&quot;</span><br></pre></td></tr></table></figure></p>
<table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>git stash</code></td>
<td>保存当前工作现场</td>
</tr>
<tr>
<td><code>git stash list</code></td>
<td>查看所有工作现场</td>
</tr>
<tr>
<td><code>git stash apply</code></td>
<td>恢复工作现场，但不删除</td>
</tr>
<tr>
<td><code>git stash drop</code></td>
<td>删除工作现场</td>
</tr>
<tr>
<td><code>git stash pop</code></td>
<td>恢复工作现场并删除</td>
</tr>
</tbody>
</table>
<ol>
<li>在 <code>dev</code> 下正常开发中，说有1个bug要解决，首先我需要把 <code>dev</code> 分支封存 <code>stash</code></li>
<li>在 <code>master</code> 下新建一个<code>issue-101</code>分支，解决bug，成功后</li>
<li>在 <code>master</code> 下合并 <code>issue-101</code>，并 <code>fix #1</code></li>
<li>在 <code>dev</code> 下合并 <code>master</code>，这样才同步了里面的bug解决方案</li>
<li>恢复<code>dev</code>封存 <code>stash pop</code>，系统自动合并 &amp; 提示有冲突，因为封存前 <code>dev</code> 写了东西，此时去文件里手动改冲突</li>
<li>继续开发<code>dev</code>，最后 <code>add</code> ，<code>commit</code></li>
<li>在 <code>master</code> 下合并最后完成的<code>dev</code></li>
</ol>
<h2 id="Feature分支"><a href="#Feature分支" class="headerlink" title="Feature分支"></a>Feature分支</h2><p>开发一个新feature，最好新建一个分支；</p>
<h2 id="多人协作"><a href="#多人协作" class="headerlink" title="多人协作"></a>多人协作</h2><p>从远程库 <code>clone</code> 时，默认情况下，只能看到本地的 <code>master</code> 分支</p>
<table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>git remote</code></td>
<td>查看远程库信息</td>
</tr>
<tr>
<td><code>git remote -v</code></td>
<td>查看远程库详细信息，如果没有推送权限，看不到 <code>push</code> 地址</td>
</tr>
</tbody>
</table>
<p>多人协作的工作模式通常是这样：</p>
<ol>
<li>首先，可以试图用 <code>git push origin branch-name</code>推送自己的修改</li>
<li>如果推送失败，则因为远程分支比你的本地更新，需要先用 <code>git pull</code> 试图合并</li>
<li>如果合并有冲突，则解决冲突，并在本地提交</li>
<li>没有冲突或者解决掉冲突后，再用 <code>git push origin branch-name</code> 推送就能成功！</li>
<li>如果 <code>git pull</code> 提示 <code>“no tracking information”</code>，则说明本地分支和远程分支的链接关系没有创建，用命令 <code>git branch --set-upstream branch-name origin/branch-name</code>。</li>
</ol>
<h2 id="tag"><a href="#tag" class="headerlink" title="tag"></a>tag</h2><table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>git tag v1.0</code></td>
<td>打一个标签</td>
</tr>
<tr>
<td><code>git tag -a v0.1 -m &quot;version 0.1 released&quot; 3628164</code></td>
<td>带有说明的标签，用-a指定标签名，-m指定说明文字</td>
</tr>
<tr>
<td><code>git tag</code></td>
<td>查看所有标签</td>
</tr>
<tr>
<td><code>git log --pretty=oneline --abbrev-commit</code></td>
<td>查看历史提交</td>
</tr>
<tr>
<td><code>git tag v0.9 6224937</code></td>
<td>给历史 <code>commit</code> 添加 <code>tag</code></td>
</tr>
<tr>
<td><code>git show &lt;tagname&gt;</code></td>
<td>查看标签信息</td>
</tr>
<tr>
<td><code>git tag -d v0.1</code></td>
<td>删除标签</td>
</tr>
<tr>
<td><code>git push origin &lt;tagname&gt;</code></td>
<td>推送某个标签到远程</td>
</tr>
<tr>
<td><code>git push origin --tags</code></td>
<td>推送全部尚未推送到远程的本地标签</td>
</tr>
</tbody>
</table>
<h2 id="gitignore"><a href="#gitignore" class="headerlink" title="gitignore"></a>gitignore</h2><p>查找 <code>gitignore</code> 哪条规则 ignore 了该文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git check-ignore -v &lt;file&gt;</span><br></pre></td></tr></table></figure></p>

                    
                        
                    
                    
                        <p>
                            <a href="/2017/05/22/Git/git/#post-footer" class="postShorten-excerpt_link link">
                                评论和共享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    <div class="pagination-bar">
    <ul class="pagination">
        
        <li class="pagination-prev">
            
                <a class="btn btn--default btn--small" href="/archives/2017/page/6/">
            
                <i class="fa fa-angle-left text-base icon-mr"></i>
                    <span>上一页</span>
            </a>
        </li>
        
        
        <li class="pagination-next">
            <a class="btn btn--default btn--small" href="/archives/2017/page/8/">
                    <span>下一页</span>
                <i class="fa fa-angle-right text-base icon-ml"></i>
            </a>
        </li>
        
        <li class="pagination-number">第 7 页 共 10 页</li>
    </ul>
</div>

</section>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2018 Archie Shi. All Rights Reserved.
    </span>
</footer>

            </div>
            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-remove"></i>
        </div>
        
            <img id="about-card-picture" src="http://cdn.shianqi.com/20171110003439_iub77X_cat_sm.png" alt="作者的图片"/>
        
            <h4 id="about-card-name">Archie Shi</h4>
        
            <div id="about-card-bio"><p>Nothing to say</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>Front-End Development Engineer</p>

            </div>
        
        
    </div>
</div>

        <div id="algolia-search-modal" class="modal-container">
    <div class="modal">
        <div class="modal-header">
            <span class="close-button"><i class="fa fa-close"></i></span>
            <a href="https://algolia.com" target="_blank" rel="noopener" class="searchby-algolia text-color-light link-unstyled">
                <span class="searchby-algolia-text text-color-light text-small">by</span>
                <img class="searchby-algolia-logo" src="https://www.algolia.com/static_assets/images/press/downloads/algolia-light.svg">
            </a>
            <i class="search-icon fa fa-search"></i>
            <form id="algolia-search-form">
                <input type="text" id="algolia-search-input" name="search"
                    class="form-control input--large search-input" placeholder="Search "
                    />
            </form>
        </div>
        <div class="modal-body">
            <div class="no-result text-color-light text-center">没有找到文章</div>
            <div class="results">
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://shianqi.github.io/2016/09/04/WebSocket/SocketIo/">
                            <h3 class="media-heading">用 Express,Socket.io 搭建 WebSocket 服务器</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2016年9月4日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://shianqi.github.io/2016/09/04/JavaScript/Event/">
                            <h3 class="media-heading">JavaScript 事件捕获和冒泡</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2016年9月4日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://shianqi.github.io/2016/09/04/MongoDB/基本语法/">
                            <h3 class="media-heading">MongoDB 基本语法</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2016年9月4日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://shianqi.github.io/2016/09/04/BrowserSync/BrowserSync/">
                            <h3 class="media-heading">BrowserSync 使用手册</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2016年9月4日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://shianqi.github.io/2016/09/04/Windows/CMD快速配置IP/">
                            <h3 class="media-heading">CMD快速配置IP地址和DNS</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2016年9月4日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://shianqi.github.io/2016/09/04/JavaScript/Javascript/">
                            <h3 class="media-heading">JavaScript 简介</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2016年9月4日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://shianqi.github.io/2016/11/14/Webpack/Webpack基础/">
                            <h3 class="media-heading">Webpack 学习笔记</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2016年11月14日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://shianqi.github.io/2016/12/10/PenetrationTest/ARP/ARP/">
                            <h3 class="media-heading">嗅探，arp欺骗，会话劫持</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2016年12月10日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://shianqi.github.io/2016/12/20/PenetrationTest/WiFiCrack/WiFiCrack/">
                            <h3 class="media-heading">用 Kali-Linux 进行 Wifi 破解</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2016年12月20日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://shianqi.github.io/2016/12/22/PenetrationTest/KaliUpdata/">
                            <h3 class="media-heading">Kali-Linux 更新、环境配置</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2016年12月22日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
            </div>
        </div>
        <div class="modal-footer">
            <p class="results-count text-medium"
                data-message-zero="没有找到文章"
                data-message-one="找到 1 篇文章"
                data-message-other="找到 {n} 篇文章">
                找到 114 篇文章
            </p>
        </div>
    </div>
</div>

        
<div id="cover" style="background-image:url('http://cdn.shianqi.com/20171111132834_TkfCwb_dr.jpeg');"></div>
        <!--SCRIPTS-->
<script src="/assets/js/script-lh5udltchpsfcjgzpmme11bbmvj4k4srd99grgzo0845ualxoy17enpqvhko.min.js"></script>
<!--SCRIPTS END-->


    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.14.1/moment-with-locales.min.js"></script>
    <script src="//cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
    <script>
        var algoliaClient = algoliasearch('DIJHXM8BEG', '65699e0c957896b498d3cf67daac9c0f');
        var algoliaIndex = algoliaClient.initIndex('blog');
    </script>

    </body>
</html>
